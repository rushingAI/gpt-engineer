{
  "runId": "e50493d2-99dc-485d-ac9e-38385cc59d27",
  "timestamp": "2025-12-23T14:43:31.520Z",
  "prompt": "创建一个待办事项列表，支持添加、删除、标记完成",
  "themeName": "pink",
  "telemetry": {
    "mode": "generate",
    "policy_version": "1.0.0",
    "prompt_hash": "5bce133c59852c92",
    "prompt_length": 4470,
    "activated_dynamic_rules": [],
    "spec_mode": "summary"
  },
  "l0": {
    "status": "fail",
    "ruleSetVersion": "1.0",
    "errorCount": 1,
    "warningCount": 0,
    "issues": [
      {
        "ruleId": "G7_IMPORT_EXPORT_MISMATCH",
        "severity": "error",
        "message": "相对导入的命名导出不存在（第 5 行）：src/lib/generated/todoLogic.ts 未导出 type TodoState, type TodoItem",
        "files": [
          "src/components/generated/todo/TodoApp.tsx",
          "src/lib/generated/todoLogic.ts"
        ],
        "evidence": "import {\n  createInitialTodos,\n  addTodo,\n  toggleTodoCompleted,\n  deleteTodo,\n  type TodoState,\n  type TodoItem,\n} from",
        "suggestion": "要么在 src/lib/generated/todoLogic.ts 中添加 `export const type TodoState = ...`（命名导出），要么把 src/components/generated/todo/TodoApp.tsx 的导入改为 default import（并确保目标文件有 export default）。建议 generated 组件统一使用命名导出并用 `import { X }` 导入。"
      }
    ],
    "appliedFixes": []
  },
  "qualityGates": {
    "enabled": true,
    "initial": {
      "L0_static": {
        "level": "L0_static",
        "passed": false,
        "issues_count": 14,
        "issues": [
          {
            "rule_id": "input_missing_text_color",
            "severity": "warning",
            "priority": 3,
            "file": "src/components/generated/todo/TodoInput.tsx",
            "line": 39,
            "message": "Input element may lack explicit text color styling (line 39). Text may be invisible against background.",
            "snippet": "<input\n            value={value}\n            onChange={(e) =>",
            "suggestion": "Add Tailwind classes: `text-gray-900` (light bg) or `text-white` (dark bg) and `placeholder:text-gray-400` or `placeholder:text-gray-500`"
          },
          {
            "rule_id": "low_contrast_dark_on_dark",
            "severity": "error",
            "priority": 3,
            "file": "src/components/generated/todo/TodoInput.tsx",
            "line": 61,
            "message": "低对比度：深色文字(text-gray-900)在深色背景(bg-black)上，文字不可读",
            "snippet": ": 'bg-[#f59e0b] text-gray-900 hover:bg-black hover:text-white hover:-translate-x-1 hover:-translate-y-1 active:translate",
            "suggestion": "将 text-gray-900 改为 text-white 或 text-gray-100",
            "gate": "L0_static"
          },
          {
            "rule_id": "low_contrast_dark_on_dark",
            "severity": "error",
            "priority": 3,
            "file": "src/components/generated/todo/TodoListItem.tsx",
            "line": 58,
            "message": "低对比度：深色文字(text-gray-900)在深色背景(bg-black)上，文字不可读",
            "snippet": "className=\"flex items-center justify-center w-8 h-8 bg-[#ef4444] text-gray-900 border-[3px] border-black rounded-sm shad",
            "suggestion": "将 text-gray-900 改为 text-white 或 text-gray-100",
            "gate": "L0_static"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'inputValue', 'errorMessage', 'todos', 'maxTodos'}，第2个return缺少{'inputValue', 'todos', 'maxTodos'}，多出{'...prev'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合",
            "gate": "L0_static"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'inputValue', 'errorMessage', 'todos', 'maxTodos'}，第3个return缺少{'inputValue', 'todos', 'maxTodos'}，多出{'...prev'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合",
            "gate": "L0_static"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'inputValue', 'errorMessage', 'todos', 'maxTodos'}，第4个return缺少{'inputValue', 'todos', 'maxTodos'}，多出{'...prev'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合",
            "gate": "L0_static"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'inputValue', 'errorMessage', 'todos', 'maxTodos'}，第5个return缺少{'inputValue', 'todos', 'maxTodos'}，多出{'...prev'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合",
            "gate": "L0_static"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'inputValue', 'errorMessage', 'todos', 'maxTodos'}，第6个return缺少{'maxTodos'}，多出{'...prev', 'newTodo]'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合",
            "gate": "L0_static"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'inputValue', 'errorMessage', 'todos', 'maxTodos'}，第7个return缺少{'inputValue', 'maxTodos'}，多出{'...prev'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合",
            "gate": "L0_static"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'inputValue', 'errorMessage', 'todos', 'maxTodos'}，第8个return缺少{'inputValue', 'maxTodos'}，多出{'...prev'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合",
            "gate": "L0_static"
          },
          {
            "rule_id": "missing_null_check",
            "severity": "error",
            "priority": 3,
            "file": "src/components/generated/todo/TodoApp.tsx",
            "line": 42,
            "message": "缺少空值检查：state.todos.length 可能在 state.todos 为 undefined 时崩溃",
            "snippet": "const total = state.todos.length;",
            "suggestion": "使用可选链：state?.todos?.length 或添加条件：state && state.todos",
            "gate": "L0_static"
          },
          {
            "rule_id": "missing_null_check",
            "severity": "error",
            "priority": 3,
            "file": "src/components/generated/todo/TodoApp.tsx",
            "line": 95,
            "message": "缺少空值检查：state.todos.length 可能在 state.todos 为 undefined 时崩溃",
            "snippet": "isAtLimit={state.todos.length >= state.maxTodos}",
            "suggestion": "使用可选链：state?.todos?.length 或添加条件：state && state.todos",
            "gate": "L0_static"
          },
          {
            "rule_id": "missing_null_check",
            "severity": "error",
            "priority": 3,
            "file": "src/components/generated/todo/TodoApp.tsx",
            "line": 124,
            "message": "缺少空值检查：state.todos.length 可能在 state.todos 为 undefined 时崩溃",
            "snippet": "{state.todos.length === 0 && (",
            "suggestion": "使用可选链：state?.todos?.length 或添加条件：state && state.todos",
            "gate": "L0_static"
          },
          {
            "severity": "error",
            "file": "src/components/generated/todo/TodoApp.tsx",
            "line": 1,
            "message": "[G7_IMPORT_EXPORT_MISMATCH] 相对导入的命名导出不存在（第 5 行）：src/lib/generated/todoLogic.ts 未导出 type TodoState, type TodoItem",
            "suggestion": "要么在 src/lib/generated/todoLogic.ts 中添加 `export const type TodoState = ...`（命名导出），要么把 src/components/generated/todo/TodoApp.tsx 的导入改为 default import（并确保目标文件有 export default）。建议 generated 组件统一使用命名导出并用 `import { X }` 导入。",
            "gate": "L0_static"
          }
        ]
      },
      "L1_typecheck": {
        "level": "L1_typecheck",
        "passed": true,
        "issues_count": 0,
        "issues": []
      },
      "L2_smoke_test": {
        "level": "L2_smoke_test",
        "passed": true,
        "issues_count": 0,
        "issues": []
      },
      "L0_style_interaction": {
        "level": "L0_style_interaction",
        "passed": false,
        "issues_count": 1,
        "issues": [
          {
            "rule_id": "G7_IMPORT_EXPORT_MISMATCH",
            "severity": "error",
            "file": "src/components/generated/todo/TodoApp.tsx",
            "line": 0,
            "message": "相对导入的命名导出不存在（第 5 行）：src/lib/generated/todoLogic.ts 未导出 type TodoState, type TodoItem",
            "snippet": "import {\n  createInitialTodos,\n  addTodo,\n  toggleTodoCompleted,\n  deleteTodo,\n  type TodoState,\n  type TodoItem,\n} from",
            "suggestion": "要么在 src/lib/generated/todoLogic.ts 中添加 `export const type TodoState = ...`（命名导出），要么把 src/components/generated/todo/TodoApp.tsx 的导入改为 default import（并确保目标文件有 export default）。建议 generated 组件统一使用命名导出并用 `import { X }` 导入。",
            "gate": "L0_style_interaction"
          }
        ]
      }
    },
    "results": {
      "L0_static": {
        "level": "L0_static",
        "passed": false,
        "issues_count": 14,
        "issues": [
          {
            "rule_id": "input_missing_text_color",
            "severity": "warning",
            "priority": 3,
            "file": "src/components/generated/todo/TodoInput.tsx",
            "line": 39,
            "message": "Input element may lack explicit text color styling (line 39). Text may be invisible against background.",
            "snippet": "<input\n            value={value}\n            onChange={(e) =>",
            "suggestion": "Add Tailwind classes: `text-gray-900` (light bg) or `text-white` (dark bg) and `placeholder:text-gray-400` or `placeholder:text-gray-500`"
          },
          {
            "rule_id": "low_contrast_dark_on_dark",
            "severity": "error",
            "priority": 3,
            "file": "src/components/generated/todo/TodoInput.tsx",
            "line": 61,
            "message": "低对比度：深色文字(text-gray-900)在深色背景(bg-black)上，文字不可读",
            "snippet": ": 'bg-[#f59e0b] text-gray-900 hover:bg-black hover:text-white hover:-translate-x-1 hover:-translate-y-1 active:translate",
            "suggestion": "将 text-gray-900 改为 text-white 或 text-gray-100",
            "gate": "L0_static"
          },
          {
            "rule_id": "low_contrast_dark_on_dark",
            "severity": "error",
            "priority": 3,
            "file": "src/components/generated/todo/TodoListItem.tsx",
            "line": 58,
            "message": "低对比度：深色文字(text-gray-900)在深色背景(bg-black)上，文字不可读",
            "snippet": "className=\"flex items-center justify-center w-8 h-8 bg-[#ef4444] text-gray-900 border-[3px] border-black rounded-sm shad",
            "suggestion": "将 text-gray-900 改为 text-white 或 text-gray-100",
            "gate": "L0_static"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'inputValue', 'errorMessage', 'todos', 'maxTodos'}，第2个return缺少{'inputValue', 'todos', 'maxTodos'}，多出{'...prev'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合",
            "gate": "L0_static"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'inputValue', 'errorMessage', 'todos', 'maxTodos'}，第3个return缺少{'inputValue', 'todos', 'maxTodos'}，多出{'...prev'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合",
            "gate": "L0_static"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'inputValue', 'errorMessage', 'todos', 'maxTodos'}，第4个return缺少{'inputValue', 'todos', 'maxTodos'}，多出{'...prev'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合",
            "gate": "L0_static"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'inputValue', 'errorMessage', 'todos', 'maxTodos'}，第5个return缺少{'inputValue', 'todos', 'maxTodos'}，多出{'...prev'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合",
            "gate": "L0_static"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'inputValue', 'errorMessage', 'todos', 'maxTodos'}，第6个return缺少{'maxTodos'}，多出{'...prev', 'newTodo]'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合",
            "gate": "L0_static"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'inputValue', 'errorMessage', 'todos', 'maxTodos'}，第7个return缺少{'inputValue', 'maxTodos'}，多出{'...prev'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合",
            "gate": "L0_static"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'inputValue', 'errorMessage', 'todos', 'maxTodos'}，第8个return缺少{'inputValue', 'maxTodos'}，多出{'...prev'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合",
            "gate": "L0_static"
          },
          {
            "rule_id": "missing_null_check",
            "severity": "error",
            "priority": 3,
            "file": "src/components/generated/todo/TodoApp.tsx",
            "line": 42,
            "message": "缺少空值检查：state.todos.length 可能在 state.todos 为 undefined 时崩溃",
            "snippet": "const total = state.todos.length;",
            "suggestion": "使用可选链：state?.todos?.length 或添加条件：state && state.todos",
            "gate": "L0_static"
          },
          {
            "rule_id": "missing_null_check",
            "severity": "error",
            "priority": 3,
            "file": "src/components/generated/todo/TodoApp.tsx",
            "line": 95,
            "message": "缺少空值检查：state.todos.length 可能在 state.todos 为 undefined 时崩溃",
            "snippet": "isAtLimit={state.todos.length >= state.maxTodos}",
            "suggestion": "使用可选链：state?.todos?.length 或添加条件：state && state.todos",
            "gate": "L0_static"
          },
          {
            "rule_id": "missing_null_check",
            "severity": "error",
            "priority": 3,
            "file": "src/components/generated/todo/TodoApp.tsx",
            "line": 124,
            "message": "缺少空值检查：state.todos.length 可能在 state.todos 为 undefined 时崩溃",
            "snippet": "{state.todos.length === 0 && (",
            "suggestion": "使用可选链：state?.todos?.length 或添加条件：state && state.todos",
            "gate": "L0_static"
          },
          {
            "severity": "error",
            "file": "src/components/generated/todo/TodoApp.tsx",
            "line": 1,
            "message": "[G7_IMPORT_EXPORT_MISMATCH] 相对导入的命名导出不存在（第 5 行）：src/lib/generated/todoLogic.ts 未导出 type TodoState, type TodoItem",
            "suggestion": "要么在 src/lib/generated/todoLogic.ts 中添加 `export const type TodoState = ...`（命名导出），要么把 src/components/generated/todo/TodoApp.tsx 的导入改为 default import（并确保目标文件有 export default）。建议 generated 组件统一使用命名导出并用 `import { X }` 导入。",
            "gate": "L0_static"
          }
        ]
      },
      "L1_typecheck": {
        "level": "L1_typecheck",
        "passed": true,
        "issues_count": 0,
        "issues": []
      },
      "L2_smoke_test": {
        "level": "L2_smoke_test",
        "passed": true,
        "issues_count": 0,
        "issues": []
      },
      "L0_style_interaction": {
        "level": "L0_style_interaction",
        "passed": false,
        "issues_count": 1,
        "issues": [
          {
            "rule_id": "G7_IMPORT_EXPORT_MISMATCH",
            "severity": "error",
            "file": "src/components/generated/todo/TodoApp.tsx",
            "line": 0,
            "message": "相对导入的命名导出不存在（第 5 行）：src/lib/generated/todoLogic.ts 未导出 type TodoState, type TodoItem",
            "snippet": "import {\n  createInitialTodos,\n  addTodo,\n  toggleTodoCompleted,\n  deleteTodo,\n  type TodoState,\n  type TodoItem,\n} from",
            "suggestion": "要么在 src/lib/generated/todoLogic.ts 中添加 `export const type TodoState = ...`（命名导出），要么把 src/components/generated/todo/TodoApp.tsx 的导入改为 default import（并确保目标文件有 export default）。建议 generated 组件统一使用命名导出并用 `import { X }` 导入。",
            "gate": "L0_style_interaction"
          }
        ]
      }
    },
    "passed": false,
    "failed_gates": [
      "L0_static",
      "L0_style_interaction"
    ],
    "healing_history": [
      {
        "iteration": 1,
        "timestamp": "2025-12-23T22:42:34.440197",
        "issues_count": 16,
        "regression": true,
        "healing_actions": {
          "ai_returned_files": 2,
          "files_applied": 2,
          "files_filtered": 0,
          "filtered_paths": [],
          "changes": [
            {
              "path": "src/lib/generated/todoLogic.ts",
              "action": "modified",
              "size_before": 4326,
              "size_after": 3699,
              "lines_before": 185,
              "lines_after": 162
            },
            {
              "path": "src/components/generated/todo/TodoApp.tsx",
              "action": "modified",
              "size_before": 5930,
              "size_after": 5665,
              "lines_before": 172,
              "lines_after": 180
            }
          ]
        },
        "gates": {
          "L0_static": {
            "passed": false,
            "issues_count": 16,
            "issues": [
              {
                "rule_id": "input_missing_text_color",
                "severity": "warning",
                "file": "src/components/generated/todo/TodoApp.tsx",
                "message": "Input element may lack explicit text color styling (line 138). Text may be invisible against background."
              },
              {
                "rule_id": "input_missing_text_color",
                "severity": "warning",
                "file": "src/components/generated/todo/TodoApp.tsx",
                "message": "Input element may lack explicit text color styling (line 145). Text may be invisible against background."
              },
              {
                "rule_id": "input_missing_text_color",
                "severity": "warning",
                "file": "src/components/generated/todo/TodoInput.tsx",
                "message": "Input element may lack explicit text color styling (line 39). Text may be invisible against background."
              },
              {
                "rule_id": "low_contrast_dark_on_dark",
                "severity": "error",
                "file": "src/components/generated/todo/TodoInput.tsx",
                "message": "低对比度：深色文字(text-gray-900)在深色背景(bg-black)上，文字不可读"
              },
              {
                "rule_id": "low_contrast_dark_on_dark",
                "severity": "error",
                "file": "src/components/generated/todo/TodoListItem.tsx",
                "message": "低对比度：深色文字(text-gray-900)在深色背景(bg-black)上，文字不可读"
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'inputValue', '...prev'}，第3个return缺少set()，多出{'todos', 'newTodo]'}"
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'inputValue', '...prev'}，第4个return缺少{'inputValue'}，多出{'todos'}"
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'inputValue', '...prev'}，第5个return缺少{'inputValue'}，多出{'completed', 'todos'}"
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'inputValue', '...prev'}，第6个return缺少{'inputValue'}，多出{'filterStatus'}"
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'inputValue', '...prev'}，第7个return缺少{'inputValue'}，多出{'editingTodoId'}"
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'inputValue', '...prev'}，第8个return缺少{'inputValue'}，多出{'text', 'todos'}"
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'inputValue', '...prev'}，第9个return缺少{'inputValue'}，多出{'editingTodoId'}"
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'inputValue', '...prev'}，第10个return缺少{'inputValue'}，多出{'editingTodoId'}"
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'inputValue', '...prev'}，第11个return缺少{'inputValue'}，多出{'editingTodoId'}"
              },
              {
                "rule_id": null,
                "severity": "error",
                "file": "src/components/generated/todo/TodoApp.tsx",
                "message": "[G7_IMPORT_EXPORT_MISMATCH] 相对导入的命名导出不存在（第 3 行）：src/lib/generated/todoLogic.ts 未导出 type TodoState, type TodoItem"
              },
              {
                "rule_id": null,
                "severity": "warning",
                "file": "src/components/generated/todo/TodoInput.tsx",
                "message": "[G6_ORPHAN_FILES] 检测到 2 个未被引用的组件文件"
              }
            ]
          },
          "L1_typecheck": {
            "passed": true,
            "issues_count": 0,
            "issues": []
          },
          "L2_smoke_test": {
            "passed": true,
            "issues_count": 0,
            "issues": []
          }
        }
      },
      {
        "iteration": 2,
        "timestamp": "2025-12-23T22:42:52.370988",
        "issues_count": 7,
        "regression": false,
        "healing_actions": {
          "ai_returned_files": 1,
          "files_applied": 1,
          "files_filtered": 0,
          "filtered_paths": [],
          "changes": [
            {
              "path": "src/lib/generated/todoLogic.ts",
              "action": "modified",
              "size_before": 3699,
              "size_after": 5966,
              "lines_before": 162,
              "lines_after": 249
            }
          ]
        },
        "gates": {
          "L0_static": {
            "passed": false,
            "issues_count": 7,
            "issues": [
              {
                "rule_id": "input_missing_text_color",
                "severity": "warning",
                "file": "src/components/generated/todo/TodoApp.tsx",
                "message": "Input element may lack explicit text color styling (line 138). Text may be invisible against background."
              },
              {
                "rule_id": "input_missing_text_color",
                "severity": "warning",
                "file": "src/components/generated/todo/TodoApp.tsx",
                "message": "Input element may lack explicit text color styling (line 145). Text may be invisible against background."
              },
              {
                "rule_id": "input_missing_text_color",
                "severity": "warning",
                "file": "src/components/generated/todo/TodoInput.tsx",
                "message": "Input element may lack explicit text color styling (line 39). Text may be invisible against background."
              },
              {
                "rule_id": "low_contrast_dark_on_dark",
                "severity": "error",
                "file": "src/components/generated/todo/TodoInput.tsx",
                "message": "低对比度：深色文字(text-gray-900)在深色背景(bg-black)上，文字不可读"
              },
              {
                "rule_id": "low_contrast_dark_on_dark",
                "severity": "error",
                "file": "src/components/generated/todo/TodoListItem.tsx",
                "message": "低对比度：深色文字(text-gray-900)在深色背景(bg-black)上，文字不可读"
              },
              {
                "rule_id": null,
                "severity": "error",
                "file": "src/components/generated/todo/TodoApp.tsx",
                "message": "[G7_IMPORT_EXPORT_MISMATCH] 相对导入的命名导出不存在（第 3 行）：src/lib/generated/todoLogic.ts 未导出 initialTodoState, todoReducer, type TodoState, type TodoItem"
              },
              {
                "rule_id": null,
                "severity": "warning",
                "file": "src/components/generated/todo/TodoInput.tsx",
                "message": "[G6_ORPHAN_FILES] 检测到 2 个未被引用的组件文件"
              }
            ]
          },
          "L1_typecheck": {
            "passed": true,
            "issues_count": 0,
            "issues": []
          },
          "L2_smoke_test": {
            "passed": true,
            "issues_count": 0,
            "issues": []
          }
        }
      },
      {
        "iteration": 3,
        "timestamp": "2025-12-23T22:43:24.402423",
        "issues_count": 11,
        "regression": true,
        "healing_actions": {
          "ai_returned_files": 4,
          "files_applied": 4,
          "files_filtered": 0,
          "filtered_paths": [],
          "changes": [
            {
              "path": "src/lib/generated/todoLogic.ts",
              "action": "modified",
              "size_before": 5966,
              "size_after": 2819,
              "lines_before": 249,
              "lines_after": 116
            },
            {
              "path": "src/components/generated/todo/TodoApp.tsx",
              "action": "modified",
              "size_before": 5665,
              "size_after": 4736,
              "lines_before": 180,
              "lines_after": 144
            },
            {
              "path": "src/components/generated/todo/TodoInput.tsx",
              "action": "modified",
              "size_before": 2458,
              "size_after": 1142,
              "lines_before": 69,
              "lines_after": 40
            },
            {
              "path": "src/components/generated/todo/TodoListItem.tsx",
              "action": "modified",
              "size_before": 2305,
              "size_after": 2555,
              "lines_before": 65,
              "lines_after": 89
            }
          ]
        },
        "gates": {
          "L0_static": {
            "passed": false,
            "issues_count": 11,
            "issues": [
              {
                "rule_id": "input_missing_text_color",
                "severity": "warning",
                "file": "src/components/generated/todo/TodoListItem.tsx",
                "message": "Input element may lack explicit text color styling (line 52). Text may be invisible against background."
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'id'}，第2个return缺少{'id'}，多出{'...state', 'inputValue'}"
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'id'}，第3个return缺少{'id'}，多出{'...state', 'inputValue', 'todos', 'newTodo]'}"
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'id'}，第4个return缺少{'id'}，多出{'...state', 'todos'}"
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'id'}，第5个return缺少{'id'}，多出{'...state', 'completed', 'todos'}"
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'id'}，第6个return缺少{'id'}，多出{'...state', 'filterStatus'}"
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'id'}，第7个return缺少{'id'}，多出{'...state', 'editingTodoId'}"
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'id'}，第8个return缺少{'id'}，多出{'...state', 'text', 'todos'}"
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'id'}，第9个return缺少{'id'}，多出{'...state', 'editingTodoId'}"
              },
              {
                "rule_id": "data_contract_violation",
                "severity": "error",
                "file": "src/lib/generated/todoLogic.ts",
                "message": "函数返回的数据结构不一致：第1个return有{'id'}，第10个return缺少{'id'}，多出{'...state', 'editingTodoId'}"
              },
              {
                "rule_id": null,
                "severity": "error",
                "file": "src/components/generated/todo/TodoApp.tsx",
                "message": "[G7_IMPORT_EXPORT_MISMATCH] 相对导入的命名导出不存在（第 5 行）：src/lib/generated/todoLogic.ts 未导出 type TodoState, type TodoItem"
              }
            ]
          },
          "L1_typecheck": {
            "passed": true,
            "issues_count": 0,
            "issues": []
          },
          "L2_smoke_test": {
            "passed": true,
            "issues_count": 0,
            "issues": []
          }
        }
      }
    ],
    "final": {
      "L0_static": {
        "level": "L0_static",
        "passed": false,
        "issues_count": 11,
        "issues": [
          {
            "rule_id": "input_missing_text_color",
            "severity": "warning",
            "priority": 3,
            "file": "src/components/generated/todo/TodoListItem.tsx",
            "line": 52,
            "message": "Input element may lack explicit text color styling (line 52). Text may be invisible against background.",
            "snippet": "<input\n          type=\"checkbox\"\n          checked={todo.completed}\n          onChange={onToggle}\n  ...",
            "suggestion": "Add Tailwind classes: `text-gray-900` (light bg) or `text-white` (dark bg) and `placeholder:text-gray-400` or `placeholder:text-gray-500`"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'id'}，第2个return缺少{'id'}，多出{'...state', 'inputValue'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'id'}，第3个return缺少{'id'}，多出{'...state', 'inputValue', 'todos', 'newTodo]'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'id'}，第4个return缺少{'id'}，多出{'...state', 'todos'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'id'}，第5个return缺少{'id'}，多出{'...state', 'completed', 'todos'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'id'}，第6个return缺少{'id'}，多出{'...state', 'filterStatus'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'id'}，第7个return缺少{'id'}，多出{'...state', 'editingTodoId'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'id'}，第8个return缺少{'id'}，多出{'...state', 'text', 'todos'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'id'}，第9个return缺少{'id'}，多出{'...state', 'editingTodoId'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合"
          },
          {
            "rule_id": "data_contract_violation",
            "severity": "error",
            "priority": 2,
            "file": "src/lib/generated/todoLogic.ts",
            "line": 1,
            "message": "函数返回的数据结构不一致：第1个return有{'id'}，第10个return缺少{'id'}，多出{'...state', 'editingTodoId'}",
            "snippet": "return { ... }",
            "suggestion": "确保所有return语句返回相同的字段集合"
          },
          {
            "severity": "error",
            "file": "src/components/generated/todo/TodoApp.tsx",
            "line": 1,
            "message": "[G7_IMPORT_EXPORT_MISMATCH] 相对导入的命名导出不存在（第 5 行）：src/lib/generated/todoLogic.ts 未导出 type TodoState, type TodoItem",
            "suggestion": "要么在 src/lib/generated/todoLogic.ts 中添加 `export const type TodoState = ...`（命名导出），要么把 src/components/generated/todo/TodoApp.tsx 的导入改为 default import（并确保目标文件有 export default）。建议 generated 组件统一使用命名导出并用 `import { X }` 导入。"
          }
        ]
      },
      "L1_typecheck": {
        "level": "L1_typecheck",
        "passed": true,
        "issues_count": 0,
        "issues": []
      },
      "L2_smoke_test": {
        "level": "L2_smoke_test",
        "passed": true,
        "issues_count": 0,
        "issues": []
      }
    }
  },
  "phases": {
    "install": {
      "status": "success",
      "startedAt": "2025-12-23T14:43:27.542Z",
      "endedAt": "2025-12-23T14:43:29.250Z",
      "duration_ms": 1708,
      "exitCode": 0,
      "logTail": "\r\nup to date in 597ms\r\n\r\n28 packages are looking for funding\r\n  run `npm fund` for details\r\n"
    },
    "dev": {
      "status": "success",
      "startedAt": "2025-12-23T14:43:29.250Z",
      "endedAt": "2025-12-23T14:43:30.371Z",
      "duration_ms": 1121,
      "exitCode": 0,
      "logTail": "\r\n> cyberpunk-app@0.0.0 dev\r\n> vite\r\n\r\n\u001b[1G\u001b[0KPort 5173 is in use, trying another one...\r\nPort 5174 is in use, trying another one...\r\nPort 5175 is in use, trying another one...\r\n",
      "url": "https://k03e2io1v3fx9wvj0vr8qd5q58o56n-fkdo--5176--365214aa.local-corp.webcontainer-api.io",
      "port": 5176
    },
    "render": {
      "status": "success",
      "startedAt": "2025-12-23T14:43:30.371Z",
      "endedAt": "2025-12-23T14:43:31.520Z",
      "duration_ms": 1149,
      "signal": "APP_RENDERED"
    }
  },
  "deps": {
    "approved": {},
    "injected": [],
    "injectError": null
  },
  "errors": {
    "console": {
      "total": 0,
      "uniqueCount": 0,
      "samples": []
    },
    "classified": {
      "INSTALL": 0,
      "DEPENDENCY": 0,
      "BUILD": 0,
      "EXPORT": 0,
      "RUNTIME": 0
    }
  }
}